!function(a,b){function c(a){var b=function(){var c=Array.prototype.concat.call([b],Array.prototype.splice.call(arguments,0));return a.apply(null,c)};return b}var d=function(){var a=function(b,c){var d=!0;for(var e in c)"string"==typeof c[e]&&"!"===c[e][0]?typeof b[e]===c[e].substring(1)&&(d=!1):"object"==typeof b[e]&&"object"==typeof c[e]?d=a(b[e],c[e])&&d:typeof b[e]!==c[e]&&(d=!1);return d};return function(){var b=this,c=arguments;1===arguments.length&&(c=arguments[0]);var d=[],e=function(){};e.use=e.args=function(){return e};var f=function(){for(var b in d){var c=d[b];if(a(arguments,c.m))return c.e.apply(this,arguments)}},g=function(){var g=arguments;return{use:function(h){return 0==g.length&&delete f.args,d.push({m:g,e:h}),c.length&&a(c,g)?(h.apply(b,c),e):f}}};return f.args=g,f}}(),e=document.createElement("div"),f=[],g=function(a){var b={};if(!a)throw new Error("No element selected");var g={};Object.setPrototypeOf(b,g),Object.defineProperty(g,"parent",{enumerable:!1,configurable:!1,get:function(){return a.parentNode&&a.parentNode.scope}}),Object.defineProperty(g,"children",{enumerable:!1,configurable:!1,get:function(){return f.filter(function(a){return a.parent==b})}}),Object.defineProperty(g,"root",{enumerable:!1,configurable:!1,get:c(function(a,c){return c=c||b,c.parent?a(c.parent):c})});var h=function(a,c){Object.defineProperty(a,"scope",{enumerable:!1,configurable:!1,get:function(){return b}}),!1!==c&&Array.prototype.forEach.call(a.querySelectorAll("*"),function(a){h(a,!1)})};h(a);var i={};return g.on=d().args({scope:{on:"function"},addEventListener:"function"},"string","function").use(function(a,c,d){if(a.scope==b){var e=i[c]||(i[c]=[]),f=!1;e.forEach(function(b){b.fn!=d&&b.fn.toString()!=d.toString()||b.el!=a||(f=!0)}),f?console.warn("listener is already registered"):(a.addEventListener(c,d),i[c].push({fn:d,el:a}))}else a.scope.on(a,c,d);return b}).args({0:"object",length:"number",forEach:"function"},"string","function").use(function(a,c,d){return a.forEach(function(a){b.on(a,c,d)}),b}).args("string","string","function").use(function(a,c,d){return"$"==a[0]?b.elements(a).forEach(function(a){b.on(a,c,d)}):console.warn("selector must begin with '$'"),b}).args("string","function").use(function(c,d){return b.on(a,c,d),b}).args().use(function(){return console.warn("on function inputs improperly formatted"),b}),g.off=d().args({scope:{off:"function"},addEventListener:"function"},"string","function").use(function(a,c,d){if(a.scope==b){var e=i[c],f=!1;e&&e.forEach(function(b,g){b.fn!=d&&b.fn.toString()!=d.toString()||b.el!=a||(f=!0,a.removeEventListener(c,b.fn),e.splice(g,1))}),f||console.warn("Listener is not currently registered")}else a.scope.off(a,c,d);return b}).args({0:"object",length:"number",forEach:"function"},"string","function").use(function(a,c,d){a.forEach(function(a){b.off(a,c,d)})}).args("string","string","function").use(function(a,c,d){return"$"==a[0]?b.elements(a).forEach(function(a){b.off(a,c,d)}):console.warn("selector must begin with '$'"),b}).args("string","function").use(function(c,d){return b.off(a,c,d),b}).args().use(function(){return console.warn("off function inputs improperly formatted"),b}),g.once=d().args({scope:{off:"function"},addEventListener:"function"},"string","function").use(function(a,c,d){if(a.scope==b){var e=function(f){d(f),b.off(a,c,e)};b.on(a,c,e)}else a.scope.once(a,c,d);return b}).args({0:"object",length:"number",forEach:"function"},"string","function").use(function(a,c,d){a.forEach(function(a){b.once(a,c,d)})}).args("string","string","function").use(function(a,c,d){return"$"==a[0]?b.elements(a).forEach(function(a){b.once(a,c,d)}):console.warn("selector must begin with '$'"),b}).args("string","function").use(function(c,d){return b.once(a,c,d),b}).args().use(function(){return console.warn("once function inputs improperly formatted"),b}),g.hasClass=d().args({className:"string"},"string").use(function(a,b){return!!a.className.match(new RegExp("(^"+b+"$|\\s"+b+"\\s|^"+b+"\\s|\\s"+b+"$)"))}).args("string","string").use(function(a,c){return"$"==a[0]?b.hasClass(b.element(a),c):(console.warn("selector must begin with '$'"),!1)}).args("string").use(function(c){return b.hasClass(a,c)}).args().use(function(a){return console.warn("malformed call"),!1}),g.addClass=d().args({scope:"object",className:"string"},"string","boolean").use(function(a,c,d){return a.scope==b?!d&&b.hasClass(a,c)||(a.className+=" "+c,a.className=a.className.replace(/(^\s+|\s+$)/g,"")):a.scope.addClass(a,c,d),b}).args({scope:"object",className:"string"},"string").use(function(a,c){return b.addClass(a,c,!1),b}).args({0:"object",length:"number",forEach:"function"},"string","boolean").use(function(a,c,d){a.forEach(function(a){b.addClass(a,c,d)})}).args("string","string","boolean").use(function(a,c,d){return"$"==a[0]?b.elements(a).forEach(function(a){b.addClass(a,c,d)}):console.warn("selector must begin with '$'"),b}).args({0:"object",length:"number",forEach:"function"},"string").use(function(a,c){a.forEach(function(a){b.addClass(a,c,!1)})}).args({scope:"object",className:"string"},"string").use(function(a,c){return b.addClass(a,c,!1),b}).args("string","string").use(function(a,c){return"$"==a[0]?b.elements(a).forEach(function(a){b.addClass(a,c,!1)}):console.warn("selector must begin with '$'"),b}).args("string","boolean").use(function(c,d){return b.addClass(a,c,d),b}).args("string").use(function(c){return b.addClass(a,c,!1),b}).args().use(function(){return console.warn("addClass function inputs improperly formatted"),b}),g.removeClass=d().args({scope:"object",className:"string"},"string","boolean").use(function(a,c,d){if(a.scope==b){var e=d?"g":"",f=new RegExp("(^"+c+"$|\\s"+c+"\\s|^"+c+"\\s|\\s"+c+"$)",e);a.className=a.className.replace(f," ").replace(/(^\s+|\s+$)/g,"").replace(/\s+/g," ")}else a.scope.removeClass(a,c,d);return b}).args({scope:"object",className:"string"},"string").use(function(a,c){return b.removeClass(a,c,!1),b}).args({0:"object",length:"number",forEach:"function"},"string","boolean").use(function(a,c,d){a.forEach(function(a){b.removeClass(a,c,d)})}).args("string","string","boolean").use(function(a,c,d){return"$"==a[0]?b.elements(a).forEach(function(a){b.removeClass(a,c,d)}):console.warn("selector must begin with '$'"),b}).args({0:"object",length:"number",forEach:"function"},"string").use(function(a,c){a.forEach(function(a){b.removeClass(a,c,!1)})}).args("string","string").use(function(a,c){return"$"==a[0]?b.elements(a).forEach(function(a){b.removeClass(a,c,!1)}):console.warn("selector must begin with '$'"),b}).args("string","boolean").use(function(c,d){return b.removeClass(a,c,d),b}).args("string").use(function(c){return b.removeClass(a,c,!1),b}).args().use(function(){return console.warn("removeClass function inputs improperly formatted"),b}),g.attr=d().args({scope:"object",getAttribute:"function",setAttribute:"function"},"string").use(function(a,c,d){return a.scope==b?void 0===d?a.getAttribute(c):(a.setAttribute(c,d),b):void 0===d?a.scope.attr(a,c):(a.scope.attr(a,c,d),b)}).args({0:"object",length:"number",forEach:"function"},"string").use(function(a,c,d){return a.forEach(function(a){b.attr(a,c,d)}),b}).args("string","string").use(function(c,d,e){if("$"==c[0]){var f=c,g=d,h=e;return void 0===h?b.attr(b.element(f),g):(b.elements(f).forEach(function(a){b.attr(a,g,h)}),b)}var g=c,h=d;return b.attr(a,g,h)}).args("string").use(function(c,d){return b.attr(a,c,d)}).args().use(function(){return console.warn("attr function inputs improperly formatted"),b}),g.css=d().args({scope:"object",style:"object"},"string").use(function(a,c,d){if(a.scope==b){if(void 0!==d){var e=b.attr(a,"style")||"",f=c+"[^;]*(;|$)";return replaceRule=new RegExp("((^(\\n|\\s)*|;)(\\s|\\n)*"+f+"|^"+f+")","gi"),replaceWith=c+":"+d+";",newRules=e.replace(replaceRule,";"+replaceWith).replace(/^;/,""),newRules==e?b.attr(a,"style",e+replaceWith):b.attr(a,"style",newRules),b}return getComputedStyle(a).getPropertyValue(c)}return d?(a.scope.css(a,c,d),b):a.scope.css(a,c)}).args({0:"object",length:"number",forEach:"function"},"string").use(function(a,c,d){return a.forEach(function(a){b.css(a,c,d)}),b}).args("string","string").use(function(c,d,e){if("$"==c[0]){var f=c,g=d,h=e;return b.elements(f).forEach(function(a){b.css(a,g,h)}),b}var g=c,h=d;return b.css(a,g,h)}).args("string").use(function(c){return b.css(a,c)}).args().use(function(){return console.warn("css function inputs improperly formatted"),b}),g.data=d().args({scope:"object",dataset:"object"},"string").use(function(a,c,d){return a.scope==b?void 0!==d?(a.dataset[c]=d,b):a.dataset[c]:a.scope.data(a,c)}).args("string","string").use(function(c,d,e){if("$"==c[0]){var f=c,g=d,h=e;return void 0===h?b.data(b.element(f),g):(b.elements(f).forEach(function(a){b.data(a,g,h)}),b)}var g=c,h=d;return b.data(a,g,h)}).args("string").use(function(c,d){return b.data(a,c,d)}).args().use(function(){return console.warn("data function inputs improperly formatted"),b}),g.html=d().args({scope:"object",appendChild:"function"},"string").use(function(a,c){return a.scope==b?(b.children.forEach(function(a){a.unlink()}),a.innerHTML=c,a.scope.include()):a.scope.html(a,c),b}).args("string","string").use(function(a,c){return"$"==a[0]&&b.html(b.element(a),c),b}).args({scope:"object",appendChild:"function"}).use(function(a){return a.scope==b?a.innerHTML:a.scope.html(a)}).args("string").use(function(c){if("$"==c[0]){var d=c;return b.html(b.element(d))}var e=c;return b.html(a,e),b}).args().use(function(a){return b.html(b.element())}),g.include=d().args({scope:"object",appendChild:"function"},"object").use(function(a,c){return a.scope!=b||c.scope?c.scope?console.warn("The item you are trying to include into this scope is already part of another scope. Try to append that scope to the current scope instead"):a.scope.include(a,c):(h(c),a.appendChild(c)),b}).args("string","object").use(function(a,c){return"$"==a[0]?b.include(b.element(a),c):console.warn("selector must begin with '$'"),b}).args("object").use(function(c){return b.include(a,c),b}).args().use(function(){return b.children.forEach(function(a){a.include()}),b.elements().forEach(function(a){a.scope||b.include(b.element(),a)}),b}),g.property=g.define=d().args("string",{get:"function",static:"undefined",asVar:"undefined"}).use(function(a,c){c.scope=b;var d={enumerable:void 0===c.enumerable||c.enumerable,configurable:!0,get:c.get};return c.set&&"function"==typeof c.set&&(d.set=c.set),d.get.bind&&(d.get=d.get.bind(c)),d.set&&d.set.bind&&(d.set=d.set.bind(c)),Object.defineProperty(b,a,d),b}).args("string",{get:"undefined",set:"undefined",asVar:"undefined",static:"!undefined"}).use(function(a,c){c.scope=b;var d={enumerable:void 0===c.enumerable||c.enumerable,configurable:!0,writable:!1,value:c.static};return d.value.bind&&(d.value=d.value.bind(c)),Object.defineProperty(b,a,d),b}).args("string",{get:"undefined",set:"undefined",asVar:"!undefined",static:"undefined"}).use(function(a,c){var d={enumerable:void 0===c.enumerable||c.enumerable,configurable:!0,writable:!0,value:c.asVar};return Object.defineProperty(b,a,d),b}).args().use(function(){return console.warn("property/define function inputs improperly formatted"),b}),g.element=function(b){return b?("$"==b[0]&&(b=b.replace(/^\$\s*/,"")),a.querySelector(b)):a},g.elements=function(c){if(c)return"$"==c[0]&&(c=c.replace(/^\$\s*/,"")),Array.prototype.slice.call(a.querySelectorAll(c),0);var d=Array.prototype.filter.call(a.querySelectorAll("*"),function(a){return a.scope==b});return d.unshift(a),d},g.append=g.appendChild=d().args({scope:{append:"function"},appendChild:"function"},{children:"object",root:"object",element:"function",unlink:"function"}).use(function(a,c){return a.scope==b?(c.unlink(),Object.setPrototypeOf(Object.getPrototypeOf(c),b),a.appendChild(c.element())):a.scope.append(a,c),b}).args("string",{children:"object",root:"object",element:"function",unlink:"function"}).use(function(a,c){return"$"==a[0]?b.append(b.element(a),c):console.warn("selector must begin with '$'"),b}).args({scope:{append:"function"},appendChild:"function"},"object").use(function(a,c){return a.scope==b?b.include(a,c):a.scope.include(a,c),b}).args("string","object").use(function(a,c){return"$"==a[0]?b.append(b.element(a),c):console.warn("selector must begin with '$'"),b}).args({scope:{append:"function"},appendChild:"function"},"string").use(function(a,c){return e.innerHTML=c,Array.prototype.slice.call(e.children,0).forEach(function(c){b.append(a,c)}),b}).args("string","string").use(function(a,c){if("$"==a[0]){var d=b.element(a);e.innerHTML=c,Array.prototype.slice.call(e.children,0).forEach(function(a){b.append(d,a)})}else console.warn("selector must begin with '$'");return b}).args({children:"object",root:"object",element:"function",unlink:"function"}).use(function(c){return b.append(a,c),b}).args("object").use(function(c){return a.scope==b&&b.append(a,c),b}).args("string").use(function(c){return e.innerHTML=c,Array.prototype.slice.call(e.children,0).forEach.call(e.children,function(c){b.append(a,c)}),b}).args().use(function(){return console.warn("append/appendChild function inputs improperly formatted"),b}),g.unlink=function(){return a.parentNode&&(Object.setPrototypeOf(Object.getPrototypeOf(b),Object.prototype),a.parentNode.removeChild(a)),b},g.render=function(){return b.unlink(),document.body.appendChild(a),b},b};a.stateless={};var h={};Object.setPrototypeOf(a.stateless,h);var i=0,j=function(b){var c=i,d=b.id||c;if(b.id){var e=b.className;b.className=b.id,e&&(b.className+=" "+e),b.removeAttribute("id")}return i++,Object.defineProperty(a.stateless,d,{enumerable:!1,configurable:!1,writable:!1,value:b}),a.stateless[c]||Object.defineProperty(a.stateless,c,{enumerable:!1,configurable:!1,writable:!1,value:b}),d};Object.defineProperty(h,"length",{enumerable:!1,configurable:!1,get:function(){return i}}),Object.defineProperty(h,"consume",{enumerable:!1,configurable:!1,writable:!1,value:function(b){if(b instanceof HTMLElement)b.parentElement&&b.parentElement.removeChild(b),j(b);else if("string"==typeof b)e.innerHTML=b,stateless.consume(e.children);else{if(!b.length||!b[0])throw new Error("Invalid inputs");for(var c=0;c<b.length;c++)stateless.consume(b[c])}return a.stateless}}),Object.defineProperty(h,"register",{enumerable:!1,configurable:!1,writable:!1,value:h.consume}),Object.defineProperty(h,"each",{enumerable:!1,configurable:!1,writable:!1,value:function(b){for(var c=0;c<i;c++)b(a.stateless[c],c);return a.stateless}}),Object.defineProperty(h,"instantiate",{enumerable:!1,configurable:!1,writable:!1,value:function(a){if(stateless[a]){var b=g(stateless[a].cloneNode(!0));return f.push(b),b}throw new Error(a+" cannot be found in the template library")}})}(this,function(a){var b=this;eval.call(b,a)}.bind(this));
