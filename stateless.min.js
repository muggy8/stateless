!function(e){function n(e){var n=function(){var t=Array.prototype.concat.call([n],Array.prototype.splice.call(arguments,0));return e.apply(null,t)};return n}if(!e.stateless){var t=function(){var e=function(n,t){var r=!0;for(var o in t)"string"==typeof t[o]&&"!"===t[o][0]?typeof n[o]===t[o].substring(1)&&(r=!1):"object"==typeof n[o]&&"object"==typeof t[o]?r=e(n[o],t[o])&&r:typeof n[o]!==t[o]&&(r=!1);return r};return function(){var n=this,t=arguments;1===arguments.length&&(t=arguments[0]);var r=[],o=function(){};o.use=o.args=function(){return o};var s=function(){for(var n in r){var t=r[n];if(e(arguments,t.m))return t.e.apply(this,arguments)}},u=function(){var u=arguments;return{use:function(i){return 0==u.length&&delete s.args,r.push({m:u,e:i}),t.length&&e(t,u)?(i.apply(n,t),o):s}}};return s.args=u,s}}(),r=document.createElement("div"),o=[],s=function(e){var s={};if(!e)throw new Error("No element selected");var u={};Object.setPrototypeOf(s,u),Object.defineProperty(u,"parent",{enumerable:!1,configurable:!1,get:function(){return e.parentNode&&e.parentNode.scope}}),Object.defineProperty(u,"children",{enumerable:!1,configurable:!1,get:function(){return o.filter(function(e){return e.parent==s})}}),Object.defineProperty(u,"root",{enumerable:!1,configurable:!1,get:n(function(e,n){return n=n||s,n.parent?e(n.parent):n})});var i=function(e,n){Object.defineProperty(e,"scope",{enumerable:!1,configurable:!1,get:function(){return s}}),!1!==n&&Array.prototype.forEach.call(e.querySelectorAll("*"),function(e){i(e,!1)})};i(e);var c={};return u.on=t().args({scope:{on:"function"},addEventListener:"function"},"string","function").use(function(e,n,t){if(e.scope==s){var r=!1;(c[n]||(c[n]=[])).forEach(function(n){n.fn!=t&&n.fn.toString()!=t.toString()||n.el!=e||(r=!0)}),r?console.warn("listener is already registered"):(e.addEventListener(n,t),c[n].push({fn:t,el:e}))}else e.scope.on(e,n,t);return s}).args({0:"object",length:"number",forEach:"function"},"string","function").use(function(e,n,t){return e.forEach(function(e){s.on(e,n,t)}),s}).args("string","string","function").use(function(e,n,t){return"$"==e[0]?s.elements(e).forEach(function(e){s.on(e,n,t)}):console.warn("selector must begin with '$'"),s}).args("string","function").use(function(n,t){return s.on(e,n,t),s}).args().use(function(){return console.warn("on function inputs improperly formatted"),s}),u.off=t().args({scope:{off:"function"},addEventListener:"function"},"string","function").use(function(e,n,t){if(e.scope==s){var r=c[n],o=!1;r&&r.forEach(function(s,u){s.fn!=t&&s.fn.toString()!=t.toString()||s.el!=e||(o=!0,e.removeEventListener(n,s.fn),r.splice(u,1))}),o||console.warn("Listener is not currently registered")}else e.scope.off(e,n,t);return s}).args({0:"object",length:"number",forEach:"function"},"string","function").use(function(e,n,t){e.forEach(function(e){s.off(e,n,t)})}).args("string","string","function").use(function(e,n,t){return"$"==e[0]?s.elements(e).forEach(function(e){s.off(e,n,t)}):console.warn("selector must begin with '$'"),s}).args("string","function").use(function(n,t){return s.off(e,n,t),s}).args().use(function(){return console.warn("off function inputs improperly formatted"),s}),u.once=t().args({scope:{off:"function"},addEventListener:"function"},"string","function").use(function(e,n,t){if(e.scope==s){var r=function(o){t(o),s.off(e,n,r)};s.on(e,n,r)}else e.scope.once(e,n,t);return s}).args({0:"object",length:"number",forEach:"function"},"string","function").use(function(e,n,t){e.forEach(function(e){s.once(e,n,t)})}).args("string","string","function").use(function(e,n,t){return"$"==e[0]?s.elements(e).forEach(function(e){s.once(e,n,t)}):console.warn("selector must begin with '$'"),s}).args("string","function").use(function(n,t){return s.once(e,n,t),s}).args().use(function(){return console.warn("once function inputs improperly formatted"),s}),u.hasClass=t().args({className:"string"},"string").use(function(e,n){return!!e.className.match(new RegExp("(^"+n+"$|\\s"+n+"\\s|^"+n+"\\s|\\s"+n+"$)"))}).args("string","string").use(function(e,n){return"$"==e[0]?s.hasClass(s.element(e),n):(console.warn("selector must begin with '$'"),!1)}).args("string").use(function(n){return s.hasClass(e,n)}).args().use(function(e){return console.warn("malformed call"),!1}),u.addClass=t().args({scope:"object",className:"string"},"string","boolean").use(function(e,n,t){return e.scope==s?!t&&s.hasClass(e,n)||(e.className+=" "+n,e.className=e.className.replace(/(^\s+|\s+$)/g,"")):e.scope.addClass(e,n,t),s}).args({scope:"object",className:"string"},"string").use(function(e,n){return s.addClass(e,n,!1),s}).args({0:"object",length:"number",forEach:"function"},"string","boolean").use(function(e,n,t){e.forEach(function(e){s.addClass(e,n,t)})}).args("string","string","boolean").use(function(e,n,t){return"$"==e[0]?s.elements(e).forEach(function(e){s.addClass(e,n,t)}):console.warn("selector must begin with '$'"),s}).args({0:"object",length:"number",forEach:"function"},"string").use(function(e,n){e.forEach(function(e){s.addClass(e,n,!1)})}).args({scope:"object",className:"string"},"string").use(function(e,n){return s.addClass(e,n,!1),s}).args("string","string").use(function(e,n){return"$"==e[0]?s.elements(e).forEach(function(e){s.addClass(e,n,!1)}):console.warn("selector must begin with '$'"),s}).args("string","boolean").use(function(n,t){return s.addClass(e,n,t),s}).args("string").use(function(n){return s.addClass(e,n,!1),s}).args().use(function(){return console.warn("addClass function inputs improperly formatted"),s}),u.removeClass=t().args({scope:"object",className:"string"},"string","boolean").use(function(e,n,t){if(e.scope==s){var r=t?"g":"",o=new RegExp("(^"+n+"$|\\s"+n+"\\s|^"+n+"\\s|\\s"+n+"$)",r);e.className=e.className.replace(o," ").replace(/(^\s+|\s+$)/g,"").replace(/\s+/g," ")}else e.scope.removeClass(e,n,t);return s}).args({scope:"object",className:"string"},"string").use(function(e,n){return s.removeClass(e,n,!1),s}).args({0:"object",length:"number",forEach:"function"},"string","boolean").use(function(e,n,t){e.forEach(function(e){s.removeClass(e,n,t)})}).args("string","string","boolean").use(function(e,n,t){return"$"==e[0]?s.elements(e).forEach(function(e){s.removeClass(e,n,t)}):console.warn("selector must begin with '$'"),s}).args({0:"object",length:"number",forEach:"function"},"string").use(function(e,n){e.forEach(function(e){s.removeClass(e,n,!1)})}).args("string","string").use(function(e,n){return"$"==e[0]?s.elements(e).forEach(function(e){s.removeClass(e,n,!1)}):console.warn("selector must begin with '$'"),s}).args("string","boolean").use(function(n,t){return s.removeClass(e,n,t),s}).args("string").use(function(n){return s.removeClass(e,n,!1),s}).args().use(function(){return console.warn("removeClass function inputs improperly formatted"),s}),u.attr=t().args({scope:"object",getAttribute:"function",setAttribute:"function"},"string").use(function(e,n,t){return e.scope==s?void 0===t?e.getAttribute(n):(e.setAttribute(n,t),s):void 0===t?e.scope.attr(e,n):(e.scope.attr(e,n,t),s)}).args({0:"object",length:"number",forEach:"function"},"string").use(function(e,n,t){return e.forEach(function(e){s.attr(e,n,t)}),s}).args("string","string").use(function(n,t,r){if("$"==n[0]){var o=n,u=t;return void 0===(i=r)?s.attr(s.element(o),u):(s.elements(o).forEach(function(e){s.attr(e,u,i)}),s)}var u=n,i=t;return s.attr(e,u,i)}).args("string").use(function(n,t){return s.attr(e,n,t)}).args().use(function(){return console.warn("attr function inputs improperly formatted"),s}),u.css=t().args({scope:"object",style:"object"},"string").use(function(e,n,t){if(e.scope==s){if(void 0!==t){var r=s.attr(e,"style")||"",o=n+"[^;]*(;|$)";return replaceRule=new RegExp("((^(\\n|\\s)*|;)(\\s|\\n)*"+o+"|^"+o+")","gi"),replaceWith=n+":"+t+";",newRules=r.replace(replaceRule,";"+replaceWith).replace(/^;/,""),newRules==r?s.attr(e,"style",r+replaceWith):s.attr(e,"style",newRules),s}return getComputedStyle(e).getPropertyValue(n)}return t?(e.scope.css(e,n,t),s):e.scope.css(e,n)}).args({0:"object",length:"number",forEach:"function"},"string").use(function(e,n,t){return e.forEach(function(e){s.css(e,n,t)}),s}).args("string","string").use(function(n,t,r){if("$"==n[0]){var o=n,u=t,i=r;return s.elements(o).forEach(function(e){s.css(e,u,i)}),s}var u=n,i=t;return s.css(e,u,i)}).args("string").use(function(n){return s.css(e,n)}).args().use(function(){return console.warn("css function inputs improperly formatted"),s}),u.data=t().args({scope:"object",dataset:"object"},"string").use(function(e,n,t){return e.scope==s?void 0!==t?(e.dataset[n]=t,s):e.dataset[n]:e.scope.data(e,n)}).args("string","string").use(function(n,t,r){if("$"==n[0]){var o=n,u=t;return void 0===(i=r)?s.data(s.element(o),u):(s.elements(o).forEach(function(e){s.data(e,u,i)}),s)}var u=n,i=t;return s.data(e,u,i)}).args("string").use(function(n,t){return s.data(e,n,t)}).args().use(function(){return console.warn("data function inputs improperly formatted"),s}),u.html=t().args({scope:"object",appendChild:"function"},"string").use(function(e,n){return e.scope==s?(s.children.forEach(function(e){e.unlink()}),e.innerHTML=n,e.scope.include()):e.scope.html(e,n),s}).args("string","string").use(function(e,n){return"$"==e[0]&&s.html(s.element(e),n),s}).args({scope:"object",appendChild:"function"}).use(function(e){return e.scope==s?e.innerHTML:e.scope.html(e)}).args("string").use(function(n){if("$"==n[0]){var t=n;return s.html(s.element(t))}var r=n;return s.html(e,r),s}).args().use(function(e){return s.html(s.element())}),u.include=t().args({scope:"object",appendChild:"function"},"object").use(function(e,n){return e.scope!=s||n.scope?n.scope?console.warn("The item you are trying to include into this scope is already part of another scope. Try to append that scope to the current scope instead"):e.scope.include(e,n):(i(n),e.appendChild(n)),s}).args("string","object").use(function(e,n){return"$"==e[0]?s.include(s.element(e),n):console.warn("selector must begin with '$'"),s}).args("object").use(function(n){return s.include(e,n),s}).args().use(function(){return s.children.forEach(function(e){e.include()}),s.elements().forEach(function(e){e.scope||s.include(s.element(),e)}),s}),u.property=u.define=t().args("string",{get:"function",static:"undefined",asVar:"undefined"}).use(function(e,n){n.scope=s;var t={enumerable:void 0===n.enumerable||n.enumerable,configurable:!0,get:n.get};return n.set&&"function"==typeof n.set&&(t.set=n.set),t.get.bind&&(t.get=t.get.bind(n)),t.set&&t.set.bind&&(t.set=t.set.bind(n)),Object.defineProperty(s,e,t),s}).args("string",{get:"undefined",set:"undefined",asVar:"undefined",static:"!undefined"}).use(function(e,n){n.scope=s;var t={enumerable:void 0===n.enumerable||n.enumerable,configurable:!0,writable:!1,value:n.static};return t.value.bind&&(t.value=t.value.bind(n)),Object.defineProperty(s,e,t),s}).args("string",{get:"undefined",set:"undefined",asVar:"!undefined",static:"undefined"}).use(function(e,n){var t={enumerable:void 0===n.enumerable||n.enumerable,configurable:!0,writable:!0,value:n.asVar};return Object.defineProperty(s,e,t),s}).args().use(function(){return console.warn("property/define function inputs improperly formatted"),s}),u.element=function(n){return n?("$"==n[0]&&(n=n.replace(/^\$\s*/,"")),e.querySelector(n)):e},u.elements=function(n){if(n)return"$"==n[0]&&(n=n.replace(/^\$\s*/,"")),Array.prototype.slice.call(e.querySelectorAll(n),0);var t=Array.prototype.filter.call(e.querySelectorAll("*"),function(e){return e.scope==s});return t.unshift(e),t},u.append=u.appendChild=t().args({scope:{append:"function"},appendChild:"function"},{children:"object",root:"object",element:"function",unlink:"function"}).use(function(e,n){return e.scope==s?(n.unlink(),Object.setPrototypeOf(Object.getPrototypeOf(n),s),e.appendChild(n.element())):e.scope.append(e,n),s}).args("string",{children:"object",root:"object",element:"function",unlink:"function"}).use(function(e,n){return"$"==e[0]?s.append(s.element(e),n):console.warn("selector must begin with '$'"),s}).args({scope:{append:"function"},appendChild:"function"},"object").use(function(e,n){return e.scope==s?s.include(e,n):e.scope.include(e,n),s}).args("string","object").use(function(e,n){return"$"==e[0]?s.append(s.element(e),n):console.warn("selector must begin with '$'"),s}).args({scope:{append:"function"},appendChild:"function"},"string").use(function(e,n){return r.innerHTML=n,Array.prototype.slice.call(r.children,0).forEach(function(n){s.append(e,n)}),s}).args("string","string").use(function(e,n){if("$"==e[0]){var t=s.element(e);r.innerHTML=n,Array.prototype.slice.call(r.children,0).forEach(function(e){s.append(t,e)})}else console.warn("selector must begin with '$'");return s}).args({children:"object",root:"object",element:"function",unlink:"function"}).use(function(n){return s.append(e,n),s}).args("object").use(function(n){return e.scope==s&&s.append(e,n),s}).args("string").use(function(n){return r.innerHTML=n,Array.prototype.slice.call(r.children,0).forEach.call(r.children,function(n){s.append(e,n)}),s}).args().use(function(){return console.warn("append/appendChild function inputs improperly formatted"),s}),u.unlink=function(){return e.parentNode&&(Object.setPrototypeOf(Object.getPrototypeOf(s),Object.prototype),e.parentNode.removeChild(e)),s},u.render=function(){return s.unlink(),document.body.appendChild(e),s},s};e.stateless={};var u={},i={};Object.setPrototypeOf(e.stateless,i),Object.setPrototypeOf(i,u);var c=0,a=function(n){var t=c,r=n.id||t;if(n.id){var o=n.className;n.className=n.id,o&&(n.className+=" "+o),n.removeAttribute("id")}return c++,Object.defineProperty(e.stateless,r,{enumerable:!1,configurable:!1,writable:!1,value:n}),e.stateless[t]||Object.defineProperty(e.stateless,t,{enumerable:!1,configurable:!1,writable:!1,value:n}),r};Object.defineProperty(u,"length",{enumerable:!1,configurable:!1,get:function(){return c}}),Object.defineProperty(u,"consume",{enumerable:!1,configurable:!1,writable:!1,value:function(n){if(n instanceof HTMLElement)n.parentElement&&n.parentElement.removeChild(n),a(n);else if("string"==typeof n)r.innerHTML=n,stateless.consume(r.children);else{if(!n.length||!n[0])throw new Error("Invalid inputs");for(var t=0;t<n.length;t++)stateless.consume(n[t])}return e.stateless}}),Object.defineProperty(u,"register",{enumerable:!1,configurable:!1,writable:!1,value:u.consume}),Object.defineProperty(u,"each",{enumerable:!1,configurable:!1,writable:!1,value:function(n){for(var t=0;t<c;t++)n(e.stateless[t],t);return e.stateless}}),Object.defineProperty(u,"instantiate",{enumerable:!1,configurable:!1,writable:!1,value:function(e){if(stateless[e]){var n=s(stateless[e].cloneNode(!0));return o.push(n),n}throw new Error(e+" cannot be found in the template library")}});var l={};Object.defineProperty(u,"watch",{enumerable:!1,configurable:!1,writable:!1,value:function(e,n){l[e]=l[e]||[];var t=l[e].push(n)-1;return function(){l[e].splice(t,1)}}}),Object.defineProperty(u,"emit",{enumerable:!1,configurable:!1,writable:!1,value:function(e,n){n=n||{},l[e]&&l[e].forEach(function(e){e(n)})}}),Object.defineProperty(u,"plugin",{enumerable:!1,configurable:!1,writable:!1,value:t().args("string","!undefined").use(function(e,n){if(i.hasOwnProperty(e))return console.warn("Plugin already defined");Object.defineProperty(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n})}).args("string","undefined").use(function(e){if(i.hasOwnProperty(e))return i[e]}).args().use(function(){console.warn("plugin error")})})}}(this);
