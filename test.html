<html>
	<head>
		<script src="templater.js"></script>
		<meta name="viewport" content="width=device-width, initial-scale=1">
	</head>
	<body>
<pre style="width:100%; overflow:auto;">
ideal usage:

step 1 - register:
stateless.register (element)
stateless.register (htmlString)
stateless.register ([elements...])
stateless.import (url)

step 2 - instantiate
var item = stateless.instantiate(id)

step 3 - manipulate the item
item.render() -> renders to body
item.addClass(string[, multiple]) -> adds a class uniquely to the dom element, if multiple add it regardless
item.removeClass(string[, multiple]) -> removes a class uniquely to the dom element, if multiple add it regardless
item.hasClass(string) -> returns true/false based of if the dom element has the class
item.css(string [, string]) -> query the css property or set it
item.appendChild(item[, where]) -> append dom element to this dom element or at a specified CSS selected element's child
item.unlink() -> remove this dom element from it's parent
item.on([selector,] "event", callback) -> attach an event listener to the top most dom element or the selected element
item.off([selector,] "event", callback) -> remove an event listener from the top most dom element or the selected
item.once([selector,] "event", callback) -> add a call once event listener to the top most dom element or the selected
item.text([string[, where]]) -> no args = get inner string, 1 arg = replace inner string, 2 arg = replace inner string at element
item.attr(string [, string]) -> get or set the attribute
item.data(string [,string]) -> get or set the data- attribute
idem.property = item.define(property, options) -> define a peroperty for the object
item.element([selector]) -> gets the one dom element or the first selected match
item.elements([selector]) -> gets everything including the root or just everything that matches the selector
item.children -> read only property that returns all child scopes
item.parent -> read only property that returns the parent scope if it exists;
item.root -> returns the root scope of the chain;
item.include() -> inclode another html node into the currnet scope

Other options:
stateless.each(callback(item, index)) -> itterate through all the templates once
instantiated_domobject.scope -> property that provides the templateInstance
</pre>
		<div id="first-div" class="test1-div">
			<strong>testing</strong>
			<p>I am testing something bla bla</p>
		</div>
		<div class="test2-div" >
			<a href="javascript:void[0]" onclick="this.scope.fn()">Here is something to click on</a>
		</div>
		<div class="test2-div"></div>
		<div class="test2-div"></div>

		<script>
			// used for mobile deving where the console doesn't exist
			function mobileLog(){
				var originalLog = console.log;
				console.log = function(){
					originalLog.apply(this, arguments)
					var domLogger = document.querySelector(".console")
					if (domLogger){
						domLogger.scope._log.apply(this, arguments)
					}
					else{
						alert(Array.prototype.toString.call(arguments))
					}

				}
			}

			// a dom based console module made using stateless
			stateless.consume("<div id='console'><pre style='width: 100%; height:8em; border: solid 1px #000; overflow:auto;'></pre><textarea rows='3' style='width:100%; margin-top:1em; margin-bottom:1em;'></textarea><button onclick='this.scope._eval(true)' style='width:50%; display:inline'>run and clear</button><button onclick='this.scope._eval()' style='width:50%; display:inline'>run</button></div>")
			var cons = stateless.instantiate("console")
			cons._eval = function(clear){
					var string = cons.element("textarea").value
					clear && (cons.element("textarea").value = "")
					cons._log(eval.call(this, string))
				}
			cons._log = function(){
				var pre = cons.element("pre")
				var added = Array.prototype.splice.call(arguments, 0).map(function(item){
					if (typeof item == 'object') {
						var str;
						if (str = JSON.stringify(item), str != "{}"){
							return str
						}
						else {
							return item.toString()
						}
					}
					else return item
				})
				pre.innerHTML += added.toString().replace(/\,/g, ",\n") + "\n\n"
				pre.scrollTop = pre.scrollHeight;
			}

			cons.render()
			mobileLog()

			// the actual test code here
			stateless.register(document.querySelector(".test1-div"))
				.register("<div id='string-div'>I was made from a string</div>")
				.register(document.querySelectorAll(".test2-div"))
				.each(function(item){
					console.log(item)
				});

			var firstDiv = stateless.instantiate("first-div")
				.appendChild(stateless.instantiate(3), "p")
				.render()

			firstDiv.fn = function(){
				console.log("I got called");
			};

			var secondDiv = document.querySelector("a").scope//.unlink()
				//.render()
				.addClass("state")
				.addClass("state")
				.addClass("state", true)
			console.log(secondDiv.attr("class"))
			secondDiv.removeClass("state")
			console.log(secondDiv.attr("class"))
			secondDiv.addClass("state", true)
				.addClass("state", true)
				.addClass("state", true)
				.removeClass("state", true);
			console.log(secondDiv.attr("class"))

			secondDiv.define("status", {asVar: 0})
			console.log("secondDiv.status should be 0 has", (secondDiv.status === 0)? "passed" : `failed. secondDiv.status = ${secondDiv.status}`);

			secondDiv.status = 15
			console.log("secondDiv.status should now be 15 has", (secondDiv.status == 15)? "passed" : `failed. secondDiv.status = ${secondDiv.status}`);

			secondDiv.define("changeStatus", {static: function(num){
				secondDiv.status = num
			}})
			console.log("secondDiv.changeStatus should a function", (typeof secondDiv.changeStatus == "function")? "passed" : `failed. secondDiv.changeStatus = ${secondDiv.changeStatus}`);

			secondDiv.changeStatus(5)
			console.log("secondDiv.status should be 5 has", (secondDiv.status === 5)? "passed" : `failed. secondDiv.status = ${secondDiv.status}`);

			var meow = "meow"
			secondDiv.property("static", {static:meow})
			console.log("secondDiv.static should be \"meow\" has", (secondDiv.static == meow)? "passed" : `failed. secondDiv.static = ${secondDiv.static}`);

			secondDiv.static = "Attempt to change static"
			console.log("secondDiv.static should still be \"meow\" has", (secondDiv.static == meow)? "passed" : `failed. secondDiv.static = ${secondDiv.static}`);

			secondDiv.property("getSet", {
				get: function(){
					return secondDiv.static + secondDiv.status;
				},
				set: function(number){
					secondDiv.status = number;
				}
			})
			console.log("secondDiv.getSet should be \"meow5\" has", (secondDiv.getSet == secondDiv.static + secondDiv.status)? "passed" : `failed. secondDiv.getSet = ${secondDiv.getSet}`);

			secondDiv.getSet = 8
			console.log("secondDiv.getSet should be \"meow8\" has", (secondDiv.getSet == secondDiv.static + secondDiv.status)? "passed" : `failed. secondDiv.getSet = ${secondDiv.getSet}`);

			secondDiv.property("getOnly", {
				get: function(){
					return secondDiv.static + secondDiv.status;
				}
			})
			console.log("secondDiv.getOnly should be \"meow8\" has", (secondDiv.getOnly == secondDiv.static + secondDiv.status)? "passed" : `failed. secondDiv.getOnly = ${secondDiv.getOnly}`);

			secondDiv.getOnly = 12
			console.log("secondDiv.getOnly should still be \"meow8\" has", (secondDiv.getOnly == secondDiv.static + secondDiv.status)? "passed" : `failed. secondDiv.getOnly = ${secondDiv.getOnly}`);

			var indexable = []
			for(var key in secondDiv){
				indexable.push(key)
			}
			console.log("secondDiv's indexable keys should be \"status\",\"changeStatus\",\"static\",\"getSet\",\"getOnly\" has", (indexable.toString == "status,changeStatus,static,getSet,getOnly")? "passed" : `failed. secondDiv.getOnly = ${indexable.toString()}`);

			firstDiv.on("a", "mouseover", function(){console.log("hovered")})
			console.log("There should be a warning after this message")
			secondDiv.on("a", "mouseover", function(){console.log("hovered")})
			console.log("If there was a warning before this message then the test has passed")
		</script>
	</body>
</html>
